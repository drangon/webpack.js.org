<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>webpack</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="/assets/favicon.ico">

    
      <link href="/bundleStaticPage.css" rel="stylesheet">
    
      <link href="/paths.css" rel="stylesheet">
    
      <link href="/style.css" rel="stylesheet">
    
  </head>
  <body>
    <div id="site" class="site"><div class="interactive" id="components/navigation/navigation.jsx" data-props="{&quot;sections&quot;:[{&quot;title&quot;:&quot;概念&quot;,&quot;url&quot;:&quot;concepts&quot;,&quot;pages&quot;:[{&quot;title&quot;:&quot;入口&quot;,&quot;url&quot;:&quot;concepts/entry-points&quot;},{&quot;title&quot;:&quot;输出&quot;,&quot;url&quot;:&quot;concepts/output&quot;},{&quot;title&quot;:&quot;加载器&quot;,&quot;url&quot;:&quot;concepts/loaders&quot;},{&quot;title&quot;:&quot;插件&quot;,&quot;url&quot;:&quot;concepts/plugins&quot;},{&quot;title&quot;:&quot;对比其它系统&quot;,&quot;url&quot;:&quot;concepts/compared-to-other-systems&quot;},{&quot;title&quot;:&quot;配置&quot;,&quot;url&quot;:&quot;concepts/configuration&quot;},{&quot;title&quot;:&quot;依赖关系&quot;,&quot;url&quot;:&quot;concepts/dependency-graph&quot;},{&quot;title&quot;:&quot;模块解析&quot;,&quot;url&quot;:&quot;concepts/module-resolution&quot;},{&quot;title&quot;:&quot;模块&quot;,&quot;url&quot;:&quot;concepts/modules&quot;},{&quot;title&quot;:&quot;目标&quot;,&quot;url&quot;:&quot;concepts/targets&quot;}]},{&quot;title&quot;:&quot;配置&quot;,&quot;url&quot;:&quot;configuration&quot;,&quot;pages&quot;:[{&quot;title&quot;:&quot;开发服务器&quot;,&quot;url&quot;:&quot;configuration/dev-server&quot;},{&quot;title&quot;:&quot;调试工具&quot;,&quot;url&quot;:&quot;configuration/devtool&quot;},{&quot;title&quot;:&quot;入口和上下文&quot;,&quot;url&quot;:&quot;configuration/entry-context&quot;},{&quot;title&quot;:&quot;扩展配置&quot;,&quot;url&quot;:&quot;configuration/external-configs&quot;},{&quot;title&quot;:&quot;扩展&quot;,&quot;url&quot;:&quot;configuration/externals&quot;},{&quot;title&quot;:&quot;模块&quot;,&quot;url&quot;:&quot;configuration/module&quot;},{&quot;title&quot;:&quot;Node&quot;,&quot;url&quot;:&quot;configuration/node&quot;},{&quot;title&quot;:&quot;其它选项&quot;,&quot;url&quot;:&quot;configuration/other-options&quot;},{&quot;title&quot;:&quot;输出&quot;,&quot;url&quot;:&quot;configuration/output&quot;},{&quot;title&quot;:&quot;通过配置&quot;,&quot;url&quot;:&quot;configuration/passing-a-config&quot;},{&quot;title&quot;:&quot;插件&quot;,&quot;url&quot;:&quot;configuration/plugins&quot;},{&quot;title&quot;:&quot;解决&quot;,&quot;url&quot;:&quot;configuration/resolve&quot;},{&quot;title&quot;:&quot;统计&quot;,&quot;url&quot;:&quot;configuration/stats&quot;},{&quot;title&quot;:&quot;目标&quot;,&quot;url&quot;:&quot;configuration/target&quot;},{&quot;title&quot;:&quot;Watch 和 Watch 选项&quot;,&quot;url&quot;:&quot;configuration/watch&quot;}]},{&quot;title&quot;:&quot;怎么做&quot;,&quot;url&quot;:&quot;how-to&quot;,&quot;pages&quot;:[{&quot;title&quot;:&quot;How to Author Libraries?&quot;,&quot;url&quot;:&quot;how-to/author-libraries&quot;},{&quot;title&quot;:&quot;如何缓存？&quot;,&quot;url&quot;:&quot;how-to/cache&quot;},{&quot;title&quot;:&quot;如何开发？&quot;,&quot;url&quot;:&quot;how-to/develop&quot;},{&quot;title&quot;:&quot;如何用 docker 开发？&quot;,&quot;url&quot;:&quot;how-to/develop/using-docker&quot;},{&quot;title&quot;:&quot;如何用第三方工具开发？&quot;,&quot;url&quot;:&quot;how-to/develop/using-third-party-tools&quot;},{&quot;title&quot;:&quot;如何用 Vagrant 开发？&quot;,&quot;url&quot;:&quot;how-to/develop/using-vagrant&quot;},{&quot;title&quot;:&quot;如何生成一个生产构建？&quot;,&quot;url&quot;:&quot;how-to/generate-production-build&quot;},{&quot;title&quot;:&quot;如何处理兼容性？&quot;,&quot;url&quot;:&quot;how-to/handle-compatibility&quot;},{&quot;title&quot;:&quot;如何处理依赖？&quot;,&quot;url&quot;:&quot;how-to/handle-dependencies&quot;},{&quot;title&quot;:&quot;如何配置 HMR 热重载？&quot;,&quot;url&quot;:&quot;how-to/hot-module-reload&quot;},{&quot;title&quot;:&quot;如何改善构建性能？&quot;,&quot;url&quot;:&quot;how-to/improve-build-performance&quot;},{&quot;title&quot;:&quot;如何安装 webpack？&quot;,&quot;url&quot;:&quot;how-to/install-webpack&quot;},{&quot;title&quot;:&quot;如何懒加载 React？&quot;,&quot;url&quot;:&quot;how-to/lazy-load/react&quot;},{&quot;title&quot;:&quot;如何基于 React 设置热重载？&quot;,&quot;url&quot;:&quot;how-to/set-up-hmr-with-react&quot;},{&quot;title&quot;:&quot;How to Shim?&quot;,&quot;url&quot;:&quot;how-to/shim&quot;},{&quot;title&quot;:&quot;如何分割代码？&quot;,&quot;url&quot;:&quot;how-to/split-code&quot;},{&quot;title&quot;:&quot;如何从 webpack1 升级？&quot;,&quot;url&quot;:&quot;how-to/upgrade-from-webpack-1&quot;}]},{&quot;title&quot;:&quot;API&quot;,&quot;url&quot;:&quot;api&quot;,&quot;pages&quot;:[{&quot;title&quot;:&quot;cli 工具&quot;,&quot;url&quot;:&quot;api/cli&quot;},{&quot;title&quot;:&quot;加载 API&quot;,&quot;url&quot;:&quot;api/loaders&quot;},{&quot;title&quot;:&quot;Node.js API&quot;,&quot;url&quot;:&quot;api/node&quot;},{&quot;title&quot;:&quot;插件 API&quot;,&quot;url&quot;:&quot;api/plugins&quot;}]},{&quot;title&quot;:&quot;其他&quot;,&quot;url&quot;:&quot;/&quot;,&quot;pages&quot;:[{&quot;title&quot;:&quot;analyze&quot;,&quot;url&quot;:&quot;analyze&quot;},{&quot;title&quot;:&quot;contribute&quot;,&quot;url&quot;:&quot;contribute&quot;},{&quot;title&quot;:&quot;get-started&quot;,&quot;url&quot;:&quot;get-started&quot;},{&quot;title&quot;:&quot;index&quot;,&quot;url&quot;:&quot;index&quot;},{&quot;title&quot;:&quot;license&quot;,&quot;url&quot;:&quot;license&quot;},{&quot;title&quot;:&quot;organization&quot;,&quot;url&quot;:&quot;organization&quot;},{&quot;title&quot;:&quot;writers-guide&quot;,&quot;url&quot;:&quot;writers-guide&quot;}]}]}"></div><div class="interactive" id="components/sidebar-mobile/sidebar-mobile.jsx" data-props="{&quot;sections&quot;:[{&quot;title&quot;:&quot;概念&quot;,&quot;url&quot;:&quot;concepts&quot;,&quot;pages&quot;:[{&quot;title&quot;:&quot;入口&quot;,&quot;url&quot;:&quot;concepts/entry-points&quot;},{&quot;title&quot;:&quot;输出&quot;,&quot;url&quot;:&quot;concepts/output&quot;},{&quot;title&quot;:&quot;加载器&quot;,&quot;url&quot;:&quot;concepts/loaders&quot;},{&quot;title&quot;:&quot;插件&quot;,&quot;url&quot;:&quot;concepts/plugins&quot;},{&quot;title&quot;:&quot;对比其它系统&quot;,&quot;url&quot;:&quot;concepts/compared-to-other-systems&quot;},{&quot;title&quot;:&quot;配置&quot;,&quot;url&quot;:&quot;concepts/configuration&quot;},{&quot;title&quot;:&quot;依赖关系&quot;,&quot;url&quot;:&quot;concepts/dependency-graph&quot;},{&quot;title&quot;:&quot;模块解析&quot;,&quot;url&quot;:&quot;concepts/module-resolution&quot;},{&quot;title&quot;:&quot;模块&quot;,&quot;url&quot;:&quot;concepts/modules&quot;},{&quot;title&quot;:&quot;目标&quot;,&quot;url&quot;:&quot;concepts/targets&quot;}]},{&quot;title&quot;:&quot;配置&quot;,&quot;url&quot;:&quot;configuration&quot;,&quot;pages&quot;:[{&quot;title&quot;:&quot;开发服务器&quot;,&quot;url&quot;:&quot;configuration/dev-server&quot;},{&quot;title&quot;:&quot;调试工具&quot;,&quot;url&quot;:&quot;configuration/devtool&quot;},{&quot;title&quot;:&quot;入口和上下文&quot;,&quot;url&quot;:&quot;configuration/entry-context&quot;},{&quot;title&quot;:&quot;扩展配置&quot;,&quot;url&quot;:&quot;configuration/external-configs&quot;},{&quot;title&quot;:&quot;扩展&quot;,&quot;url&quot;:&quot;configuration/externals&quot;},{&quot;title&quot;:&quot;模块&quot;,&quot;url&quot;:&quot;configuration/module&quot;},{&quot;title&quot;:&quot;Node&quot;,&quot;url&quot;:&quot;configuration/node&quot;},{&quot;title&quot;:&quot;其它选项&quot;,&quot;url&quot;:&quot;configuration/other-options&quot;},{&quot;title&quot;:&quot;输出&quot;,&quot;url&quot;:&quot;configuration/output&quot;},{&quot;title&quot;:&quot;通过配置&quot;,&quot;url&quot;:&quot;configuration/passing-a-config&quot;},{&quot;title&quot;:&quot;插件&quot;,&quot;url&quot;:&quot;configuration/plugins&quot;},{&quot;title&quot;:&quot;解决&quot;,&quot;url&quot;:&quot;configuration/resolve&quot;},{&quot;title&quot;:&quot;统计&quot;,&quot;url&quot;:&quot;configuration/stats&quot;},{&quot;title&quot;:&quot;目标&quot;,&quot;url&quot;:&quot;configuration/target&quot;},{&quot;title&quot;:&quot;Watch 和 Watch 选项&quot;,&quot;url&quot;:&quot;configuration/watch&quot;}]},{&quot;title&quot;:&quot;怎么做&quot;,&quot;url&quot;:&quot;how-to&quot;,&quot;pages&quot;:[{&quot;title&quot;:&quot;How to Author Libraries?&quot;,&quot;url&quot;:&quot;how-to/author-libraries&quot;},{&quot;title&quot;:&quot;如何缓存？&quot;,&quot;url&quot;:&quot;how-to/cache&quot;},{&quot;title&quot;:&quot;如何开发？&quot;,&quot;url&quot;:&quot;how-to/develop&quot;},{&quot;title&quot;:&quot;如何用 docker 开发？&quot;,&quot;url&quot;:&quot;how-to/develop/using-docker&quot;},{&quot;title&quot;:&quot;如何用第三方工具开发？&quot;,&quot;url&quot;:&quot;how-to/develop/using-third-party-tools&quot;},{&quot;title&quot;:&quot;如何用 Vagrant 开发？&quot;,&quot;url&quot;:&quot;how-to/develop/using-vagrant&quot;},{&quot;title&quot;:&quot;如何生成一个生产构建？&quot;,&quot;url&quot;:&quot;how-to/generate-production-build&quot;},{&quot;title&quot;:&quot;如何处理兼容性？&quot;,&quot;url&quot;:&quot;how-to/handle-compatibility&quot;},{&quot;title&quot;:&quot;如何处理依赖？&quot;,&quot;url&quot;:&quot;how-to/handle-dependencies&quot;},{&quot;title&quot;:&quot;如何配置 HMR 热重载？&quot;,&quot;url&quot;:&quot;how-to/hot-module-reload&quot;},{&quot;title&quot;:&quot;如何改善构建性能？&quot;,&quot;url&quot;:&quot;how-to/improve-build-performance&quot;},{&quot;title&quot;:&quot;如何安装 webpack？&quot;,&quot;url&quot;:&quot;how-to/install-webpack&quot;},{&quot;title&quot;:&quot;如何懒加载 React？&quot;,&quot;url&quot;:&quot;how-to/lazy-load/react&quot;},{&quot;title&quot;:&quot;如何基于 React 设置热重载？&quot;,&quot;url&quot;:&quot;how-to/set-up-hmr-with-react&quot;},{&quot;title&quot;:&quot;How to Shim?&quot;,&quot;url&quot;:&quot;how-to/shim&quot;},{&quot;title&quot;:&quot;如何分割代码？&quot;,&quot;url&quot;:&quot;how-to/split-code&quot;},{&quot;title&quot;:&quot;如何从 webpack1 升级？&quot;,&quot;url&quot;:&quot;how-to/upgrade-from-webpack-1&quot;}]},{&quot;title&quot;:&quot;API&quot;,&quot;url&quot;:&quot;api&quot;,&quot;pages&quot;:[{&quot;title&quot;:&quot;cli 工具&quot;,&quot;url&quot;:&quot;api/cli&quot;},{&quot;title&quot;:&quot;加载 API&quot;,&quot;url&quot;:&quot;api/loaders&quot;},{&quot;title&quot;:&quot;Node.js API&quot;,&quot;url&quot;:&quot;api/node&quot;},{&quot;title&quot;:&quot;插件 API&quot;,&quot;url&quot;:&quot;api/plugins&quot;}]},{&quot;title&quot;:&quot;其他&quot;,&quot;url&quot;:&quot;/&quot;,&quot;pages&quot;:[{&quot;title&quot;:&quot;analyze&quot;,&quot;url&quot;:&quot;analyze&quot;},{&quot;title&quot;:&quot;contribute&quot;,&quot;url&quot;:&quot;contribute&quot;},{&quot;title&quot;:&quot;get-started&quot;,&quot;url&quot;:&quot;get-started&quot;},{&quot;title&quot;:&quot;index&quot;,&quot;url&quot;:&quot;index&quot;},{&quot;title&quot;:&quot;license&quot;,&quot;url&quot;:&quot;license&quot;},{&quot;title&quot;:&quot;organization&quot;,&quot;url&quot;:&quot;organization&quot;},{&quot;title&quot;:&quot;writers-guide&quot;,&quot;url&quot;:&quot;writers-guide&quot;}]}]}"></div><aside class="sidecar"><a href="//github.com/webpack/webpack" target="_blank" class="sidecar__link sidecar__link--github"><span class="sidecar__label">克隆仓库</span><i class="sidecar__icon icon-github"></i></a><a href="#" class="sidecar__link sidecar__link--gitter js-gitter-toggle-chat-button"><span class="sidecar__label">寻求帮助</span><i class="sidecar__icon icon-gitter"></i></a><a href="//medium.com/webpack" target="_blank" class="sidecar__link sidecar__link--medium"><span class="sidecar__label">访问博客</span><i class="sidecar__icon icon-medium"></i></a><a href="//stackoverflow.com/questions/tagged/webpack" target="_blank" class="sidecar__link sidecar__link--so"><span class="sidecar__label">Stack Overflow</span><i class="sidecar__icon icon-stack-overflow"></i></a></aside><div class="container page"><div class="interactive" id="components/sidebar/sidebar.jsx" data-props="{&quot;sectionName&quot;:&quot;api&quot;,&quot;pages&quot;:[{&quot;url&quot;:&quot;api/cli&quot;,&quot;title&quot;:&quot;cli 工具&quot;,&quot;anchors&quot;:[{&quot;title&quot;:&quot;Overview&quot;,&quot;id&quot;:&quot;overview&quot;},{&quot;title&quot;:&quot;Installation&quot;,&quot;id&quot;:&quot;installation&quot;},{&quot;title&quot;:&quot;Common Usage&quot;,&quot;id&quot;:&quot;common-usage&quot;},{&quot;title&quot;:&quot;Examples&quot;,&quot;id&quot;:&quot;examples&quot;},{&quot;title&quot;:&quot;Common Options&quot;,&quot;id&quot;:&quot;common-options&quot;},{&quot;title&quot;:&quot;Output Options&quot;,&quot;id&quot;:&quot;output-options&quot;},{&quot;title&quot;:&quot;Example Usage&quot;,&quot;id&quot;:&quot;example-usage&quot;},{&quot;title&quot;:&quot;Debug Options&quot;,&quot;id&quot;:&quot;debug-options&quot;},{&quot;title&quot;:&quot;Module Options&quot;,&quot;id&quot;:&quot;module-options&quot;},{&quot;title&quot;:&quot;Watch Options&quot;,&quot;id&quot;:&quot;watch-options&quot;},{&quot;title&quot;:&quot;Optimize Options&quot;,&quot;id&quot;:&quot;optimize-options&quot;},{&quot;title&quot;:&quot;Resolve Options&quot;,&quot;id&quot;:&quot;resolve-options&quot;},{&quot;title&quot;:&quot;Stats Options&quot;,&quot;id&quot;:&quot;stats-options&quot;},{&quot;title&quot;:&quot;Advanced Options&quot;,&quot;id&quot;:&quot;advanced-options&quot;},{&quot;title&quot;:&quot;Shortcuts&quot;,&quot;id&quot;:&quot;shortcuts&quot;},{&quot;title&quot;:&quot;Profiling&quot;,&quot;id&quot;:&quot;profiling&quot;}]},{&quot;url&quot;:&quot;api/loaders&quot;,&quot;title&quot;:&quot;加载 API&quot;,&quot;anchors&quot;:[]},{&quot;url&quot;:&quot;api/node&quot;,&quot;title&quot;:&quot;Node.js API&quot;,&quot;anchors&quot;:[{&quot;title&quot;:&quot;Installation&quot;,&quot;id&quot;:&quot;installation&quot;},{&quot;title&quot;:&quot;webpack()&quot;,&quot;id&quot;:&quot;webpack-&quot;},{&quot;title&quot;:&quot;Compiler Instance&quot;,&quot;id&quot;:&quot;compiler-instance&quot;},{&quot;title&quot;:&quot;Run&quot;,&quot;id&quot;:&quot;run&quot;},{&quot;title&quot;:&quot;Watching&quot;,&quot;id&quot;:&quot;watching&quot;},{&quot;title&quot;:&quot;Close Watching&quot;,&quot;id&quot;:&quot;close-watching&quot;},{&quot;title&quot;:&quot;Invalidate Watching&quot;,&quot;id&quot;:&quot;invalidate-watching&quot;},{&quot;title&quot;:&quot;Stats Object&quot;,&quot;id&quot;:&quot;stats-object&quot;},{&quot;title&quot;:&quot;stats.hasErrors()&quot;,&quot;id&quot;:&quot;stats-haserrors-&quot;},{&quot;title&quot;:&quot;stats.hasWarnings()&quot;,&quot;id&quot;:&quot;stats-haswarnings-&quot;},{&quot;title&quot;:&quot;stats.toJSON(options)&quot;,&quot;id&quot;:&quot;stats-tojson-options-&quot;},{&quot;title&quot;:&quot;stats.toString(options)&quot;,&quot;id&quot;:&quot;stats-tostring-options-&quot;},{&quot;title&quot;:&quot;Error Handling&quot;,&quot;id&quot;:&quot;error-handling&quot;},{&quot;title&quot;:&quot;Compiling to Memory&quot;,&quot;id&quot;:&quot;compiling-to-memory&quot;}]},{&quot;url&quot;:&quot;api/plugins&quot;,&quot;title&quot;:&quot;插件 API&quot;,&quot;anchors&quot;:[]}]}"></div><section class="page__content"><h1>Node.js API</h1><a class="page__edit" href="https://github.com/vuefe/webpack.js.org/edit/develop/content/api/node.md">编辑此页  <i class="icon-edit"></i></a><div><p>webpack provides a Node.js API which can be used directly in Node.js runtime.</p>
<p>The Node.js API is useful in scenarios in which you need to customize the build or development process since all the reporting and error handling must be done manually and webpack only does the compiling part.</p>
<h2 class="header"><a class="anchor" href="#installation" id="installation"></a><span class="text">Installation</span><a class="icon-link" href="#installation"></a></h2>
<p>To start using webpack Node.js API, first install webpack if you haven’t yet:</p>
<pre><code>npm <span class="token function" >install</span> webpack --save-dev
</code></pre><p>Then require the webpack module in your Node.js script:</p>
<pre><code class="lang-js"><span class="token keyword" >const</span> webpack <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >"webpack"</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true">// Or if you prefer ES6:</span>
<span class="token keyword" >import</span> webpack <span class="token keyword" >from</span> <span class="token string" >"webpack"</span><span class="token punctuation" >;</span>
</code></pre>
<h2 class="header"><a class="anchor" href="#webpack-" id="webpack-"></a><span class="text"><code>webpack()</code></span><a class="icon-link" href="#webpack-"></a></h2>
<p>The imported <code>webpack</code> function is fed a webpack <a href="/configuration/">Configuration Object</a> and runs the webpack compiler if a callback function is provided:</p>
<pre><code class="lang-js"><span class="token keyword" >const</span> webpack <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >"webpack"</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token function" >webpack</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// <a class="code-link" href="/configuration/">Configuration Object</a></span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span> <span class="token punctuation" >(</span>err<span class="token punctuation" >,</span> <a class="code-link" href="#stats-object">stats</a><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token keyword" >if</span> <span class="token punctuation" >(</span>err <span class="token operator" >||</span> stats<span class="token punctuation" >.</span><span class="token function" >hasErrors</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// <a class="code-link" href="#error-handling">Handle errors here</a></span>
  <span class="token punctuation" >}</span>
  <span class="token comment" spellcheck="true">// Done processing</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<blockquote class="tip"><div class="tip-title"><i class="tip-icon icon-info"></i>tip</div>The <code>err</code> object <strong>will not</strong> include compilation errors and those must be handled separately using <code>stats.hasErrors()</code> which will be covered in detail in <a href="#error-handling">Error Handling</a> section of this guide. The <code>err</code> object will only contain webpack-related issues, such as misconfiguration, etc.</blockquote><p><strong>Note</strong> that you can provide the <code>webpack</code> function with an array of configurations:</p>
<pre><code class="lang-js"><span class="token function" >webpack</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span>
  <span class="token punctuation" >{</span> <span class="token comment" spellcheck="true">/* Configuration Object */</span> <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >{</span> <span class="token comment" spellcheck="true">/* Configuration Object */</span> <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >{</span> <span class="token comment" spellcheck="true">/* Configuration Object */</span> <span class="token punctuation" >}</span>
<span class="token punctuation" >]</span><span class="token punctuation" >,</span> <span class="token punctuation" >(</span>err<span class="token punctuation" >,</span> <a class="code-link" href="#stats-object">stats</a><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<blockquote class="tip"><div class="tip-title"><i class="tip-icon icon-info"></i>tip</div>webpack will <strong>not</strong> run the multiple configurations in parallel. Each configuration is only processed after the previous one has finished processing. To have webpack process them in parallel, you can use a third-party solution like <a href="https://www.npmjs.com/package/parallel-webpack">parallel-webpack</a>.</blockquote><h2 class="header"><a class="anchor" href="#compiler-instance" id="compiler-instance"></a><span class="text">Compiler Instance</span><a class="icon-link" href="#compiler-instance"></a></h2>
<p>If you don’t pass the <code>webpack</code> runner function a callback, it will return a webpack <code>Compiler</code> instance. This instance can be used to manually trigger the webpack runner or have it build and watch for changes. Much like the <a href="/api/cli/">CLI</a> Api. The <code>Compiler</code> instance provides the following methods:</p>
<ul>
<li><code>.run(callback)</code></li>
<li><code>.watch(watchOptions, handler)</code></li>
</ul>
<h2 class="header"><a class="anchor" href="#run" id="run"></a><span class="text">Run</span><a class="icon-link" href="#run"></a></h2>
<p>Calling the <code>run</code> method on the <code>Compiler</code> instance is much like the quick run method mentioned above:</p>
<pre><code class="lang-js"><span class="token keyword" >const</span> webpack <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >"webpack"</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token keyword" >const</span> compiler <span class="token operator" >=</span> <span class="token function" >webpack</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// <a class="code-link" href="/configuration/">Configuration Object</a></span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

compiler<span class="token punctuation" >.</span><span class="token function" >run</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span>err<span class="token punctuation" >,</span> <a class="code-link" href="#stats-object">stats</a><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<h2 class="header"><a class="anchor" href="#watching" id="watching"></a><span class="text">Watching</span><a class="icon-link" href="#watching"></a></h2>
<p>Calling the <code>watch</code> method, triggers the webpack runner, but then watches for changes (much like CLI: <code>webpack --watch</code>), as soon as webpack detects a change, runs again. Returns an instance of <code>Watching</code>.</p>
<pre><code class="lang-js"><span class="token function" >watch</span><span class="token punctuation" >(</span>watchOptions<span class="token punctuation" >,</span> callback<span class="token punctuation" >)</span>
</code></pre>
<pre><code class="lang-js"><span class="token keyword" >const</span> webpack <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >"webpack"</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token keyword" >const</span> compiler <span class="token operator" >=</span> <span class="token function" >webpack</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// <a class="code-link" href="/configuration/">Configuration Object</a></span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token keyword" >const</span> watching <span class="token operator" >=</span> compiler<span class="token punctuation" >.</span><span class="token function" >watch</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
<details><summary><span class='code-details-summary-span'>  <span class="token comment" spellcheck="true">/* <a class="code-link" href="/configuration/watch/#watchoptions">watchOptions</a> */</span></span></summary>  aggregateTimeout<span class="token punctuation" >:</span> <span class="token number" >300</span><span class="token punctuation" >,</span>
  poll<span class="token punctuation" >:</span> undefined
</details><span class="token punctuation" >}</span><span class="token punctuation" >,</span> <span class="token punctuation" >(</span>err<span class="token punctuation" >,</span> <a class="code-link" href="#stats-object">stats</a><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Print watch/build result here...</span>
  console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation" >(</span>stats<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p><code>Watching</code> options are <a href="/configuration/watch/#watchoptions">covered in detail here</a>.</p>
<h3 class="header"><a class="anchor" href="#close-watching" id="close-watching"></a><span class="text">Close <code>Watching</code></span><a class="icon-link" href="#close-watching"></a></h3>
<p>The <code>watch</code> method returns a <code>Watching</code> instance that exposes <code>.close(callback)</code> method. Calling this method will end watching:</p>
<pre><code class="lang-js">watching<span class="token punctuation" >.</span><span class="token function" >close</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation" >(</span><span class="token string" >"Watching Ended."</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<blockquote class="tip"><div class="tip-title"><i class="tip-icon icon-info"></i>tip</div>It’s not allowed to watch or run again before the existing watcher has been closed or invalidated.</blockquote><h3 class="header"><a class="anchor" href="#invalidate-watching" id="invalidate-watching"></a><span class="text">Invalidate <code>Watching</code></span><a class="icon-link" href="#invalidate-watching"></a></h3>
<p>Manually invalidate the current compiling round, but don’t stop watching.</p>
<pre><code class="lang-js">watching<span class="token punctuation" >.</span><span class="token function" >invalidate</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  console<span class="token punctuation" >.</span><span class="token function" >warn</span><span class="token punctuation" >(</span><span class="token string" >"Invalidated."</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<h2 class="header"><a class="anchor" href="#stats-object" id="stats-object"></a><span class="text">Stats Object</span><a class="icon-link" href="#stats-object"></a></h2>
<p>The <code>stats</code> object that is passed as a second argument of the <a href="#webpack-"><code>webpack()</code></a> callback, is a good source of information about the code compilation process. It includes:</p>
<ul>
<li>Errors and Warnings (if any)</li>
<li>Timings</li>
<li>Module and Chunk information</li>
<li>etc.</li>
</ul>
<p>The <a href="/api/cli">webpack CLI</a> uses this information to display a nicely formatted output in your console.</p>
<p>This object exposes these methods:</p>
<h3 class="header"><a class="anchor" href="#stats-haserrors-" id="stats-haserrors-"></a><span class="text"><code>stats.hasErrors()</code></span><a class="icon-link" href="#stats-haserrors-"></a></h3>
<p>Can be used to check if there were errors while compiling. Returns <code>true</code> or <code>false</code>.</p>
<h3 class="header"><a class="anchor" href="#stats-haswarnings-" id="stats-haswarnings-"></a><span class="text"><code>stats.hasWarnings()</code></span><a class="icon-link" href="#stats-haswarnings-"></a></h3>
<p>Can be used to check if there were warnings while compiling. Returns <code>true</code> or <code>false</code>.</p>
<h3 class="header"><a class="anchor" href="#stats-tojson-options-" id="stats-tojson-options-"></a><span class="text"><code>stats.toJSON(options)</code></span><a class="icon-link" href="#stats-tojson-options-"></a></h3>
<p>Returns compilation information as a JSON object. <code>options</code> can be either a string (a preset) or an object for more granular control:</p>
<pre><code class="lang-js">stats<span class="token punctuation" >.</span><span class="token function" >toJSON</span><span class="token punctuation" >(</span><span class="token string" >"minimal"</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span> <span class="token comment" spellcheck="true">// <a class="code-link" href="/configuration/stats">more options: "verbose", etc</a>.</span>
</code></pre>
<pre><code class="lang-js">stats<span class="token punctuation" >.</span><span class="token function" >toJSON</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  assets<span class="token punctuation" >:</span> <span class="token boolean" >false</span><span class="token punctuation" >,</span>
  hash<span class="token punctuation" >:</span> <span class="token boolean" >true</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>All available options and presets are described in <a href="/configuration/stats">Stats documentation</a></p>
<blockquote>
<p>Here’s <a href="https://github.com/webpack/analyse/blob/master/app/pages/upload/example.json">an example of this function’s output</a></p>
</blockquote>
<h3 class="header"><a class="anchor" href="#stats-tostring-options-" id="stats-tostring-options-"></a><span class="text"><code>stats.toString(options)</code></span><a class="icon-link" href="#stats-tostring-options-"></a></h3>
<p>Returns a formatted string of the compilation information (similar to <a href="/api/cli">CLI</a> output).</p>
<p>Options are the same as <a href="/api/node#stats-tojson-options-"><code>stats.toJSON(options)</code></a> with one addition:</p>
<pre><code class="lang-js">stats<span class="token punctuation" >.</span><span class="token function" >toString</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// ...</span>
  <span class="token comment" spellcheck="true">// Add console colors</span>
  colors<span class="token punctuation" >:</span> <span class="token boolean" >true</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>Here’s an example of <code>stats.toString()</code> usage:</p>
<pre><code class="lang-js"><span class="token keyword" >const</span> webpack <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >"webpack"</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token function" >webpack</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// <a class="code-link" href="/configuration/">Configuration Object</a></span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span> <span class="token punctuation" >(</span>err<span class="token punctuation" >,</span> stats<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token keyword" >if</span> <span class="token punctuation" >(</span>err<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    console<span class="token punctuation" >.</span><span class="token function" >error</span><span class="token punctuation" >(</span>err<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token keyword" >return</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation" >(</span>stats<span class="token punctuation" >.</span><span class="token function" >toString</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
    chunks<span class="token punctuation" >:</span> <span class="token boolean" >false</span><span class="token punctuation" >,</span>  <span class="token comment" spellcheck="true">// Makes the build much quieter</span>
    colors<span class="token punctuation" >:</span> <span class="token boolean" >true</span>    <span class="token comment" spellcheck="true">// Shows colors in the console</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<h2 class="header"><a class="anchor" href="#error-handling" id="error-handling"></a><span class="text">Error Handling</span><a class="icon-link" href="#error-handling"></a></h2>
<p>For a good error handling, you need to account for these three types of errors:</p>
<ul>
<li>Fatal webpack errors (wrong configuration, etc)</li>
<li>Compilation errors (missing modules, syntax errors, etc)</li>
<li>Compilation warnings</li>
</ul>
<p>Here’s an example that does all that:</p>
<pre><code class="lang-js"><span class="token keyword" >const</span> webpack <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >"webpack"</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token function" >webpack</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// <a class="code-link" href="/configuration/">Configuration Object</a></span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span> <span class="token punctuation" >(</span>err<span class="token punctuation" >,</span> stats<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token keyword" >if</span> <span class="token punctuation" >(</span>err<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    console<span class="token punctuation" >.</span><span class="token function" >error</span><span class="token punctuation" >(</span>err<span class="token punctuation" >.</span>stack <span class="token operator" >||</span> err<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token keyword" >if</span> <span class="token punctuation" >(</span>err<span class="token punctuation" >.</span>details<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      console<span class="token punctuation" >.</span><span class="token function" >error</span><span class="token punctuation" >(</span>err<span class="token punctuation" >.</span>details<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>
    <span class="token keyword" >return</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  <span class="token keyword" >const</span> info <span class="token operator" >=</span> stats<span class="token punctuation" >.</span><span class="token function" >toJSON</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token keyword" >if</span> <span class="token punctuation" >(</span>stats<span class="token punctuation" >.</span><span class="token function" >hasErrors</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    console<span class="token punctuation" >.</span><span class="token function" >error</span><span class="token punctuation" >(</span>info<span class="token punctuation" >.</span>errors<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  <span class="token keyword" >if</span> <span class="token punctuation" >(</span>stats<span class="token punctuation" >.</span><span class="token function" >hasWarnings</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    console<span class="token punctuation" >.</span><span class="token function" >warn</span><span class="token punctuation" >(</span>info<span class="token punctuation" >.</span>warnings<span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span>

  <span class="token comment" spellcheck="true">// Log result...</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<h2 class="header"><a class="anchor" href="#compiling-to-memory" id="compiling-to-memory"></a><span class="text">Compiling to Memory</span><a class="icon-link" href="#compiling-to-memory"></a></h2>
<p>webpack writes the output to the specified files on disk. If you want webpack to output them to a different kind of file system (memory, webDAV, etc), you can set the <code>outputFileSystem</code> option on the compiler:</p>
<pre><code class="lang-js"><span class="token keyword" >const</span> MemoryFS <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >"memory-fs"</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token keyword" >const</span> webpack <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >"webpack"</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token keyword" >const</span> fs <span class="token operator" >=</span> <span class="token keyword" >new</span> <span class="token class-name" >MemoryFS</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token keyword" >const</span> compiler <span class="token operator" >=</span> <span class="token function" >webpack</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span> <span class="token comment" spellcheck="true">/* options*/</span> <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

compiler<span class="token punctuation" >.</span>outputFileSystem <span class="token operator" >=</span> fs<span class="token punctuation" >;</span>
compiler<span class="token punctuation" >.</span><span class="token function" >run</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span>err<span class="token punctuation" >,</span> stats<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Read te output later:</span>
  <span class="token keyword" >const</span> content <span class="token operator" >=</span> fs<span class="token punctuation" >.</span><span class="token function" >readFileSync</span><span class="token punctuation" >(</span><span class="token string" >"..."</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<blockquote class="tip"><div class="tip-title"><i class="tip-icon icon-info"></i>tip</div>The output file system you provide needs to be compatible with Node’s own <a href="https://nodejs.org/api/fs.html"><code>fs</code></a> module interface.</blockquote></div><hr/><div class="contributors"><h3>贡献者：</h3><div class="contributors__list"><a class="contributor" href="https://github.com/sallar"><img src="https://github.com/sallar.png?size=50"/></a></div></div></section></div><div class="footer"><div class="container footer__inner"><section class="footer__left"><a href="/get-started" class="footer__link">起步</a><a href="/analyze" class="footer__link">分析</a><a href="/contribute" class="footer__link">贡献</a></section><section class="footer__middle"><a href="/" class="footer__icon"><img src="/7291f7007988120cc0b20372736970c2.png"/></a></section><section class="footer__right"><a href="//gitter.im/webpack/webpack" target="_blank" class="footer__link">支持</a><a href="https://github.com/webpack/webpack/releases" target="_blank" class="footer__link">更新日志</a><a href="/license" class="footer__link">遵循协议</a></section></div></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-46921629-2', 'auto');ga('send', 'pageview');</script></div>

    
      <script src="/431032f5367c8de9bddbbbf02d0159b5.js" type="text/javascript"></script>
    
    <script>
      ((window.gitter = {}).chat = {}).options = {
        room: 'webpack/webpack',
        activationElement: false
      };
    </script>
    <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
  </body>
</html>
